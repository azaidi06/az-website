{
  "hash": "6e6e7e7d2d44ec9f6982ea21ace23a2f",
  "result": {
    "engine": "jupyter",
    "markdown": "---\ntitle: \"Web Scraping Tennis Abstract with Playwright\"\ndescription: \"A concise guide to scraping JavaScript-rendered tennis data using modern Python tools\"\ndate: \"2026-02-02\"\ncategories: [Tennis, Python, Web Scraping, Tutorial]\ntoc: true\ntoc-depth: 2\nimage: \"scraping-cover.png\"\nformat:\n    html:\n        code-fold: false\n        code-tools: true\njupyter: python3\nfreeze: true\ndraft: false\n---\n\n# Introduction\n\n[Tennis Abstract](https://www.tennisabstract.com/) is one of the best resources for tennis statistics on the web. Created by Jeff Sackmann, it provides detailed match histories, serve statistics, and performance data for professional tennis players.\n\n**The challenge:** Tennis Abstract uses JavaScript to render its data tables. If you try scraping with `requests` + `BeautifulSoup`, you'll get an empty page because the content loads dynamically after the initial HTML.\n\n**The solution:** [Playwright](https://playwright.dev/python/) - a modern browser automation library that can:\n- Launch a real browser (headless or visible)\n- Wait for JavaScript to execute\n- Extract data from the fully-rendered page\n\nIn this tutorial, we'll build a scraper to fetch player match histories and serve statistics, then visualize the data.\n\n::: {.callout-note}\n## Sync vs Async API\nPlaywright offers both synchronous and asynchronous APIs. In Jupyter notebooks, we must use the **async API** because notebooks run inside an asyncio event loop. For standalone scripts, the sync API (`sync_playwright`) is simpler.\n:::\n\n# Setup\n\nFirst, install the required packages:\n\n```bash\npip install playwright pandas plotly\nplaywright install chromium\n```\n\nThe second command downloads a Chromium browser for Playwright to control.\n\n::: {#imports .cell execution_count=1}\n``` {.python .cell-code}\nfrom playwright.async_api import async_playwright\nimport pandas as pd\nimport plotly.express as px\nimport plotly.graph_objects as go\nfrom datetime import datetime\nimport asyncio\nimport re\n```\n:::\n\n\n# Understanding the Target Page\n\nEach player on Tennis Abstract has a page like:\n- ATP: `https://www.tennisabstract.com/cgi-bin/player.cgi?p=JannikSinner`\n- WTA: `https://www.tennisabstract.com/cgi-bin/wplayer.cgi?p=IgaSwiatek`\n\nThe recent matches table has the ID `#recent-results` and contains these columns:\n\n| Index | Column | Description |\n|-------|--------|-------------|\n| 0 | Date | Match date (e.g., \"19-Jan-2026\") |\n| 1 | Tournament | Tournament name |\n| 2 | Surface | Hard, Clay, or Grass |\n| 3 | Rd | Round (F, SF, QF, R16, etc.) |\n| 4 | Rk | Player's ranking at match time |\n| 5 | vRk | Opponent's ranking |\n| 6 | Result | Who won (e.g., \"Sinner d. Djokovic\") |\n| 7 | Score | Match score |\n| 8 | DR | Delta ranking |\n| 9 | A% | Ace percentage |\n| 10 | DF% | Double fault percentage |\n| 11 | 1stIn | First serve in percentage |\n| 12 | 1st% | First serve points won |\n| 13 | 2nd% | Second serve points won |\n| 14 | BPSvd | Break points saved |\n| 15 | Time | Match duration |\n\n# Building the Scraper\n\nLet's build a scraper that captures both match results and serve statistics:\n\n::: {#scraper-function .cell execution_count=2}\n``` {.python .cell-code}\ndef parse_result(result_text: str, player_name: str) -> dict:\n    \"\"\"Parse the result cell to extract win/loss and opponent info.\"\"\"\n    if \" d. \" not in result_text:\n        return {\"won\": None, \"opponent\": None}\n    \n    winner_part, loser_part = result_text.split(\" d. \")\n    \n    def extract_name(text):\n        text = re.sub(r'\\(\\d+\\)', '', text)  # Remove seed\n        text = re.sub(r'\\[.*?\\]', '', text)  # Remove country\n        text = re.sub(r'\\(WC\\)|\\(Q\\)|\\(LL\\)', '', text)  # Remove entry type\n        return text.strip()\n    \n    winner_name = extract_name(winner_part)\n    loser_name = extract_name(loser_part)\n    player_won = player_name.lower() in winner_name.lower()\n    \n    return {\n        \"won\": player_won,\n        \"opponent\": loser_name if player_won else winner_name\n    }\n\n\ndef parse_percentage(text: str) -> float:\n    \"\"\"Parse percentage string like '65%' or '65' to float.\"\"\"\n    try:\n        return float(text.replace('%', '').strip())\n    except (ValueError, AttributeError):\n        return None\n\n\ndef parse_date(date_str: str) -> datetime:\n    \"\"\"Parse date string like '19-Jan-2026' to datetime.\"\"\"\n    try:\n        return datetime.strptime(date_str.strip(), \"%d-%b-%Y\")\n    except ValueError:\n        return None\n\n\nasync def scrape_player_with_stats(player_url_name: str, player_last_name: str, tour: str = \"atp\") -> pd.DataFrame:\n    \"\"\"\n    Scrape recent matches with serve statistics for a player.\n    \n    Args:\n        player_url_name: Player name in URL format (e.g., \"JannikSinner\")\n        player_last_name: Player's last name for result parsing\n        tour: \"atp\" or \"wta\"\n    \n    Returns:\n        DataFrame with match data and serve stats\n    \"\"\"\n    prefix = \"w\" if tour == \"wta\" else \"\"\n    url = f\"https://www.tennisabstract.com/cgi-bin/{prefix}player.cgi?p={player_url_name}\"\n    \n    async with async_playwright() as p:\n        browser = await p.chromium.launch(headless=True)\n        page = await browser.new_page()\n        await page.goto(url, wait_until=\"domcontentloaded\")\n        await page.wait_for_timeout(3000)\n        \n        table = await page.query_selector(\"#recent-results\")\n        if not table:\n            print(f\"Could not find table for {player_last_name}\")\n            await browser.close()\n            return pd.DataFrame()\n        \n        rows = await table.query_selector_all(\"tr\")\n        rows = rows[1:]  # Skip header\n        matches = []\n        \n        for row in rows:\n            cells = await row.query_selector_all(\"td\")\n            cell_texts = [await cell.inner_text() for cell in cells]\n            cell_texts = [text.strip() for text in cell_texts]\n            \n            if len(cell_texts) >= 12:  # Need serve stats columns\n                result_info = parse_result(cell_texts[6], player_last_name)\n                \n                matches.append({\n                    \"player\": player_last_name,\n                    \"date\": parse_date(cell_texts[0]),\n                    \"tournament\": cell_texts[1],\n                    \"surface\": cell_texts[2],\n                    \"round\": cell_texts[3],\n                    \"won\": result_info[\"won\"],\n                    \"opponent\": result_info[\"opponent\"],\n                    \"score\": cell_texts[7],\n                    \"ace_pct\": parse_percentage(cell_texts[9]) if len(cell_texts) > 9 else None,\n                    \"df_pct\": parse_percentage(cell_texts[10]) if len(cell_texts) > 10 else None,\n                    \"first_serve_pct\": parse_percentage(cell_texts[11]) if len(cell_texts) > 11 else None,\n                    \"first_serve_won_pct\": parse_percentage(cell_texts[12]) if len(cell_texts) > 12 else None,\n                    \"second_serve_won_pct\": parse_percentage(cell_texts[13]) if len(cell_texts) > 13 else None,\n                })\n        \n        await browser.close()\n    \n    return pd.DataFrame(matches)\n```\n:::\n\n\n# Example: Scraping Jannik Sinner's Matches\n\nLet's test our scraper by fetching Sinner's recent match history with serve stats:\n\n::: {#scrape-sinner .cell execution_count=3}\n``` {.python .cell-code}\nsinner_matches = await scrape_player_with_stats(\"JannikSinner\", \"Sinner\", tour=\"atp\")\n\nprint(f\"Found {len(sinner_matches)} matches for Sinner\")\nsinner_matches[[\"date\", \"tournament\", \"opponent\", \"won\", \"first_serve_pct\", \"ace_pct\"]].head(10)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nFound 21 matches for Sinner\n```\n:::\n\n::: {.cell-output .cell-output-display execution_count=3}\n```{=html}\n<div>\n<style scoped>\n    .dataframe tbody tr th:only-of-type {\n        vertical-align: middle;\n    }\n\n    .dataframe tbody tr th {\n        vertical-align: top;\n    }\n\n    .dataframe thead th {\n        text-align: right;\n    }\n</style>\n<table border=\"1\" class=\"dataframe\">\n  <thead>\n    <tr style=\"text-align: right;\">\n      <th></th>\n      <th>date</th>\n      <th>tournament</th>\n      <th>opponent</th>\n      <th>won</th>\n      <th>first_serve_pct</th>\n      <th>ace_pct</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <th>0</th>\n      <td>2026-01-19</td>\n      <td>Australian Open</td>\n      <td>Novak Djokovic</td>\n      <td>False</td>\n      <td>75.2</td>\n      <td>19.5</td>\n    </tr>\n    <tr>\n      <th>1</th>\n      <td>2026-01-19</td>\n      <td>Australian Open</td>\n      <td>Ben Shelton</td>\n      <td>True</td>\n      <td>59.3</td>\n      <td>5.5</td>\n    </tr>\n    <tr>\n      <th>2</th>\n      <td>2026-01-19</td>\n      <td>Australian Open</td>\n      <td>Luciano Darderi</td>\n      <td>True</td>\n      <td>72.1</td>\n      <td>22.1</td>\n    </tr>\n    <tr>\n      <th>3</th>\n      <td>2026-01-19</td>\n      <td>Australian Open</td>\n      <td>Eliot Spizzirri</td>\n      <td>True</td>\n      <td>66.7</td>\n      <td>12.9</td>\n    </tr>\n    <tr>\n      <th>4</th>\n      <td>2026-01-19</td>\n      <td>Australian Open</td>\n      <td>James Duckworth</td>\n      <td>True</td>\n      <td>64.9</td>\n      <td>23.4</td>\n    </tr>\n    <tr>\n      <th>5</th>\n      <td>2026-01-19</td>\n      <td>Australian Open</td>\n      <td>Hugo Gaston</td>\n      <td>True</td>\n      <td>64.4</td>\n      <td>13.3</td>\n    </tr>\n    <tr>\n      <th>6</th>\n      <td>2025-11-09</td>\n      <td>Tour Finals</td>\n      <td>Carlos Alcaraz</td>\n      <td>True</td>\n      <td>55.1</td>\n      <td>10.3</td>\n    </tr>\n    <tr>\n      <th>7</th>\n      <td>2025-11-09</td>\n      <td>Tour Finals</td>\n      <td>Alex De Minaur</td>\n      <td>True</td>\n      <td>74.6</td>\n      <td>11.9</td>\n    </tr>\n    <tr>\n      <th>8</th>\n      <td>2025-11-09</td>\n      <td>Tour Finals</td>\n      <td>Alexander Zverev</td>\n      <td>True</td>\n      <td>70.6</td>\n      <td>17.6</td>\n    </tr>\n    <tr>\n      <th>9</th>\n      <td>2025-11-09</td>\n      <td>Tour Finals</td>\n      <td>Ben Shelton</td>\n      <td>True</td>\n      <td>74.6</td>\n      <td>17.5</td>\n    </tr>\n  </tbody>\n</table>\n</div>\n```\n:::\n:::\n\n\n# Comparing Two Players\n\nNow let's scrape data for both Sinner and Alcaraz to compare their serve statistics. We'll add a small delay between requests to be respectful to the server.\n\n::: {#scrape-both .cell execution_count=4}\n``` {.python .cell-code}\n# Scrape Alcaraz (with rate limiting)\nawait asyncio.sleep(2)  # Be nice to the server\nalcaraz_matches = await scrape_player_with_stats(\"CarlosAlcaraz\", \"Alcaraz\", tour=\"atp\")\n\nprint(f\"Found {len(alcaraz_matches)} matches for Alcaraz\")\n\n# Combine the data\nall_matches = pd.concat([sinner_matches, alcaraz_matches], ignore_index=True)\nall_matches = all_matches.dropna(subset=[\"date\", \"first_serve_pct\"])\nall_matches = all_matches.sort_values(\"date\")\n\nprint(f\"\\nTotal matches with serve data: {len(all_matches)}\")\nall_matches.groupby(\"player\").size()\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nFound 20 matches for Alcaraz\n\nTotal matches with serve data: 41\n```\n:::\n\n::: {.cell-output .cell-output-display execution_count=4}\n```\nplayer\nAlcaraz    20\nSinner     21\ndtype: int64\n```\n:::\n:::\n\n\n# Visualizing First Serve Percentage\n\nLet's create an interactive plot comparing Sinner and Alcaraz's first serve percentage over time:\n\n::: {#plot-serve .cell execution_count=5}\n``` {.python .cell-code}\n# Create the comparison plot\nfig = px.scatter(\n    all_matches,\n    x=\"date\",\n    y=\"first_serve_pct\",\n    color=\"player\",\n    hover_data=[\"tournament\", \"opponent\", \"won\", \"surface\"],\n    title=\"First Serve % Over Time: Sinner vs Alcaraz\",\n    labels={\n        \"date\": \"Date\",\n        \"first_serve_pct\": \"First Serve %\",\n        \"player\": \"Player\"\n    },\n    color_discrete_map={\"Sinner\": \"#e94560\", \"Alcaraz\": \"#4facfe\"}\n)\n\n# Add trend lines\nfor player, color in [(\"Sinner\", \"#e94560\"), (\"Alcaraz\", \"#4facfe\")]:\n    player_data = all_matches[all_matches[\"player\"] == player].copy()\n    if len(player_data) > 1:\n        # Rolling average for trend\n        player_data = player_data.sort_values(\"date\")\n        player_data[\"rolling_avg\"] = player_data[\"first_serve_pct\"].rolling(window=5, min_periods=1).mean()\n        \n        fig.add_trace(go.Scatter(\n            x=player_data[\"date\"],\n            y=player_data[\"rolling_avg\"],\n            mode=\"lines\",\n            name=f\"{player} (5-match avg)\",\n            line=dict(color=color, width=2, dash=\"dash\"),\n            hoverinfo=\"skip\"\n        ))\n\nfig.update_layout(\n    height=500,\n    hovermode=\"closest\",\n    legend=dict(orientation=\"h\", yanchor=\"bottom\", y=1.02, xanchor=\"center\", x=0.5)\n)\n\nfig.show()\n```\n\n::: {.cell-output .cell-output-display}\n```{=html}\n        <script type=\"text/javascript\">\n        window.PlotlyConfig = {MathJaxConfig: 'local'};\n        if (window.MathJax && window.MathJax.Hub && window.MathJax.Hub.Config) {window.MathJax.Hub.Config({SVG: {font: \"STIX-Web\"}});}\n        </script>\n        <script type=\"module\">import \"https://cdn.plot.ly/plotly-3.1.1.min\"</script>\n        \n```\n:::\n\n::: {.cell-output .cell-output-display}\n```{=html}\n<div>            <script src=\"https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-AMS-MML_SVG\"></script><script type=\"text/javascript\">if (window.MathJax && window.MathJax.Hub && window.MathJax.Hub.Config) {window.MathJax.Hub.Config({SVG: {font: \"STIX-Web\"}});}</script>                <script type=\"text/javascript\">window.PlotlyConfig = {MathJaxConfig: 'local'};</script>\n        <script charset=\"utf-8\" src=\"https://cdn.plot.ly/plotly-3.1.1.min.js\" integrity=\"sha256-HUEFyfiTnZJxCxur99FjbKYTvKSzwDaD3/x5TqHpFu4=\" crossorigin=\"anonymous\"></script>                <div id=\"4d496102-1f90-43e7-a1cd-4ea8672648c9\" class=\"plotly-graph-div\" style=\"height:500px; width:100%;\"></div>            <script type=\"text/javascript\">                window.PLOTLYENV=window.PLOTLYENV || {};                                if (document.getElementById(\"4d496102-1f90-43e7-a1cd-4ea8672648c9\")) {                    Plotly.newPlot(                        \"4d496102-1f90-43e7-a1cd-4ea8672648c9\",                        [{\"customdata\":[[\"Laver Cup\",\"Francisco Cerundolo\",true,\"Hard\"],[\"Laver Cup\",\"Taylor Fritz\",false,\"Hard\"],[\"Tokyo\",\"Sebastian Baez\",true,\"Hard\"],[\"Tokyo\",\"Zizou Bergs\",true,\"Hard\"],[\"Tokyo\",\"Brandon Nakashima\",true,\"Hard\"],[\"Tokyo\",\"Casper Ruud\",true,\"Hard\"],[\"Tokyo\",\"Taylor Fritz\",true,\"Hard\"],[\"Paris Masters\",\"Cameron Norrie\",false,\"Hard\"],[\"Tour Finals\",\"Lorenzo Musetti\",true,\"Hard\"],[\"Tour Finals\",\"Felix Auger Aliassime\",true,\"Hard\"],[\"Tour Finals\",\"Jannik Sinner\",false,\"Hard\"],[\"Tour Finals\",\"Taylor Fritz\",true,\"Hard\"],[\"Tour Finals\",\"Alex De Minaur\",true,\"Hard\"],[\"Australian Open\",\"Yannick Hanfmann\",true,\"Hard\"],[\"Australian Open\",\"Corentin Moutet\",true,\"Hard\"],[\"Australian Open\",\"Tommy Paul\",true,\"Hard\"],[\"Australian Open\",\"Alex De Minaur\",true,\"Hard\"],[\"Australian Open\",\"Alexander Zverev\",true,\"Hard\"],[\"Australian Open\",\"Novak Djokovic\",true,\"Hard\"],[\"Australian Open\",\"Adam Walton\",true,\"Hard\"]],\"hovertemplate\":\"Player=Alcaraz\\u003cbr\\u003eDate=%{x}\\u003cbr\\u003eFirst Serve %=%{y}\\u003cbr\\u003etournament=%{customdata[0]}\\u003cbr\\u003eopponent=%{customdata[1]}\\u003cbr\\u003ewon=%{customdata[2]}\\u003cbr\\u003esurface=%{customdata[3]}\\u003cextra\\u003e\\u003c\\u002fextra\\u003e\",\"legendgroup\":\"Alcaraz\",\"marker\":{\"color\":\"#4facfe\",\"symbol\":\"circle\"},\"mode\":\"markers\",\"name\":\"Alcaraz\",\"orientation\":\"v\",\"showlegend\":true,\"x\":[\"2025-09-19T00:00:00.000000000\",\"2025-09-19T00:00:00.000000000\",\"2025-09-24T00:00:00.000000000\",\"2025-09-24T00:00:00.000000000\",\"2025-09-24T00:00:00.000000000\",\"2025-09-24T00:00:00.000000000\",\"2025-09-24T00:00:00.000000000\",\"2025-10-27T00:00:00.000000000\",\"2025-11-09T00:00:00.000000000\",\"2025-11-09T00:00:00.000000000\",\"2025-11-09T00:00:00.000000000\",\"2025-11-09T00:00:00.000000000\",\"2025-11-09T00:00:00.000000000\",\"2026-01-19T00:00:00.000000000\",\"2026-01-19T00:00:00.000000000\",\"2026-01-19T00:00:00.000000000\",\"2026-01-19T00:00:00.000000000\",\"2026-01-19T00:00:00.000000000\",\"2026-01-19T00:00:00.000000000\",\"2026-01-19T00:00:00.000000000\"],\"xaxis\":\"x\",\"y\":{\"dtype\":\"f8\",\"bdata\":\"ZmZmZmYmT0AzMzMzM3NRQDMzMzMzM1NAmpmZmZnZTkDNzMzMzKxQQJqZmZmZ2U9AAAAAAADAT0DNzMzMzIxOQM3MzMzMTFFAAAAAAACgUkBmZmZmZgZRQGZmZmZmBlBAzczMzMysUEAAAAAAAABQQDMzMzMzs1FAzczMzMyMUUBmZmZmZuZMQM3MzMzMLFBAMzMzMzNTUEAAAAAAAOBQQA==\"},\"yaxis\":\"y\",\"type\":\"scatter\"},{\"customdata\":[[\"Vienna\",\"Flavio Cobolli\",true,\"Hard\"],[\"Vienna\",\"Alexander Bublik\",true,\"Hard\"],[\"Vienna\",\"Alex De Minaur\",true,\"Hard\"],[\"Vienna\",\"Alexander Zverev\",true,\"Hard\"],[\"Vienna\",\"Daniel Altmaier\",true,\"Hard\"],[\"Paris Masters\",\"Alexander Zverev\",true,\"Hard\"],[\"Paris Masters\",\"Ben Shelton\",true,\"Hard\"],[\"Paris Masters\",\"Francisco Cerundolo\",true,\"Hard\"],[\"Paris Masters\",\"Zizou Bergs\",true,\"Hard\"],[\"Paris Masters\",\"Felix Auger Aliassime\",true,\"Hard\"],[\"Tour Finals\",\"Carlos Alcaraz\",true,\"Hard\"],[\"Tour Finals\",\"Alex De Minaur\",true,\"Hard\"],[\"Tour Finals\",\"Alexander Zverev\",true,\"Hard\"],[\"Tour Finals\",\"Ben Shelton\",true,\"Hard\"],[\"Tour Finals\",\"Felix Auger Aliassime\",true,\"Hard\"],[\"Australian Open\",\"Eliot Spizzirri\",true,\"Hard\"],[\"Australian Open\",\"James Duckworth\",true,\"Hard\"],[\"Australian Open\",\"Hugo Gaston\",true,\"Hard\"],[\"Australian Open\",\"Ben Shelton\",true,\"Hard\"],[\"Australian Open\",\"Luciano Darderi\",true,\"Hard\"],[\"Australian Open\",\"Novak Djokovic\",false,\"Hard\"]],\"hovertemplate\":\"Player=Sinner\\u003cbr\\u003eDate=%{x}\\u003cbr\\u003eFirst Serve %=%{y}\\u003cbr\\u003etournament=%{customdata[0]}\\u003cbr\\u003eopponent=%{customdata[1]}\\u003cbr\\u003ewon=%{customdata[2]}\\u003cbr\\u003esurface=%{customdata[3]}\\u003cextra\\u003e\\u003c\\u002fextra\\u003e\",\"legendgroup\":\"Sinner\",\"marker\":{\"color\":\"#e94560\",\"symbol\":\"circle\"},\"mode\":\"markers\",\"name\":\"Sinner\",\"orientation\":\"v\",\"showlegend\":true,\"x\":[\"2025-10-20T00:00:00.000000000\",\"2025-10-20T00:00:00.000000000\",\"2025-10-20T00:00:00.000000000\",\"2025-10-20T00:00:00.000000000\",\"2025-10-20T00:00:00.000000000\",\"2025-10-27T00:00:00.000000000\",\"2025-10-27T00:00:00.000000000\",\"2025-10-27T00:00:00.000000000\",\"2025-10-27T00:00:00.000000000\",\"2025-10-27T00:00:00.000000000\",\"2025-11-09T00:00:00.000000000\",\"2025-11-09T00:00:00.000000000\",\"2025-11-09T00:00:00.000000000\",\"2025-11-09T00:00:00.000000000\",\"2025-11-09T00:00:00.000000000\",\"2026-01-19T00:00:00.000000000\",\"2026-01-19T00:00:00.000000000\",\"2026-01-19T00:00:00.000000000\",\"2026-01-19T00:00:00.000000000\",\"2026-01-19T00:00:00.000000000\",\"2026-01-19T00:00:00.000000000\"],\"xaxis\":\"x\",\"y\":{\"dtype\":\"f8\",\"bdata\":\"ZmZmZmYmUEDNzMzMzKxQQM3MzMzMrFBAmpmZmZn5UEAzMzMzM7NNQM3MzMzM7FBAAAAAAADAUkCamZmZmdlRQGZmZmZmJlBAZmZmZmYGUkDNzMzMzIxLQGZmZmZmplJAZmZmZmamUUBmZmZmZqZSQGZmZmZmplFAzczMzMysUECamZmZmTlQQJqZmZmZGVBAZmZmZmamTUBmZmZmZgZSQM3MzMzMzFJA\"},\"yaxis\":\"y\",\"type\":\"scatter\"},{\"hoverinfo\":\"skip\",\"line\":{\"color\":\"#e94560\",\"dash\":\"dash\",\"width\":2},\"mode\":\"lines\",\"name\":\"Sinner (5-match avg)\",\"x\":[\"2025-10-20T00:00:00.000000000\",\"2025-10-20T00:00:00.000000000\",\"2025-10-20T00:00:00.000000000\",\"2025-10-20T00:00:00.000000000\",\"2025-10-20T00:00:00.000000000\",\"2025-10-27T00:00:00.000000000\",\"2025-10-27T00:00:00.000000000\",\"2025-10-27T00:00:00.000000000\",\"2025-10-27T00:00:00.000000000\",\"2025-10-27T00:00:00.000000000\",\"2025-11-09T00:00:00.000000000\",\"2025-11-09T00:00:00.000000000\",\"2025-11-09T00:00:00.000000000\",\"2025-11-09T00:00:00.000000000\",\"2025-11-09T00:00:00.000000000\",\"2026-01-19T00:00:00.000000000\",\"2026-01-19T00:00:00.000000000\",\"2026-01-19T00:00:00.000000000\",\"2026-01-19T00:00:00.000000000\",\"2026-01-19T00:00:00.000000000\",\"2026-01-19T00:00:00.000000000\"],\"y\":{\"dtype\":\"f8\",\"bdata\":\"ZmZmZmYmUECamZmZmWlQQAAAAAAAgFBAZmZmZmaeUECkcD0K10NQQOxRuB6Fa1BA9ihcj8LVUEBSuB6F6xFRQEjhehSu51BACtejcD2KUUCPwvUoXK9RQArXo3A9qlFAmpmZmZnZUECamZmZmVlRQGZmZmZmRlFAmpmZmZlZUUAUrkfhevRQQFK4HoXrcVFAj8L1KFzvUEAehetRuF5QQGZmZmZmhlBA\"},\"type\":\"scatter\"},{\"hoverinfo\":\"skip\",\"line\":{\"color\":\"#4facfe\",\"dash\":\"dash\",\"width\":2},\"mode\":\"lines\",\"name\":\"Alcaraz (5-match avg)\",\"x\":[\"2025-09-19T00:00:00.000000000\",\"2025-09-19T00:00:00.000000000\",\"2025-09-24T00:00:00.000000000\",\"2025-09-24T00:00:00.000000000\",\"2025-09-24T00:00:00.000000000\",\"2025-09-24T00:00:00.000000000\",\"2025-09-24T00:00:00.000000000\",\"2025-10-27T00:00:00.000000000\",\"2025-11-09T00:00:00.000000000\",\"2025-11-09T00:00:00.000000000\",\"2025-11-09T00:00:00.000000000\",\"2025-11-09T00:00:00.000000000\",\"2025-11-09T00:00:00.000000000\",\"2026-01-19T00:00:00.000000000\",\"2026-01-19T00:00:00.000000000\",\"2026-01-19T00:00:00.000000000\",\"2026-01-19T00:00:00.000000000\",\"2026-01-19T00:00:00.000000000\",\"2026-01-19T00:00:00.000000000\",\"2026-01-19T00:00:00.000000000\"],\"y\":{\"dtype\":\"f8\",\"bdata\":\"ZmZmZmYmT0AzMzMzM4NQQIiIiIiIaFFAmpmZmZnpUEA+CtejcN1QQI\\u002fC9Shc71BAHoXrUbieUEDtUbgehatPQPYoXI\\u002fCFVBAKlyPwvXoT0AehetRuH5QQEjhehSux1BA4XoUrkchUUCPwvUoXA9RQK5H4XoUDlFAH4XrUbjeUEDrUbgehetQQEjhehSuZ1BAAAAAAABgUEDNzMzMzIxQQA==\"},\"type\":\"scatter\"}],                        {\"template\":{\"data\":{\"histogram2dcontour\":[{\"type\":\"histogram2dcontour\",\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"},\"colorscale\":[[0.0,\"#0d0887\"],[0.1111111111111111,\"#46039f\"],[0.2222222222222222,\"#7201a8\"],[0.3333333333333333,\"#9c179e\"],[0.4444444444444444,\"#bd3786\"],[0.5555555555555556,\"#d8576b\"],[0.6666666666666666,\"#ed7953\"],[0.7777777777777778,\"#fb9f3a\"],[0.8888888888888888,\"#fdca26\"],[1.0,\"#f0f921\"]]}],\"choropleth\":[{\"type\":\"choropleth\",\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}}],\"histogram2d\":[{\"type\":\"histogram2d\",\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"},\"colorscale\":[[0.0,\"#0d0887\"],[0.1111111111111111,\"#46039f\"],[0.2222222222222222,\"#7201a8\"],[0.3333333333333333,\"#9c179e\"],[0.4444444444444444,\"#bd3786\"],[0.5555555555555556,\"#d8576b\"],[0.6666666666666666,\"#ed7953\"],[0.7777777777777778,\"#fb9f3a\"],[0.8888888888888888,\"#fdca26\"],[1.0,\"#f0f921\"]]}],\"heatmap\":[{\"type\":\"heatmap\",\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"},\"colorscale\":[[0.0,\"#0d0887\"],[0.1111111111111111,\"#46039f\"],[0.2222222222222222,\"#7201a8\"],[0.3333333333333333,\"#9c179e\"],[0.4444444444444444,\"#bd3786\"],[0.5555555555555556,\"#d8576b\"],[0.6666666666666666,\"#ed7953\"],[0.7777777777777778,\"#fb9f3a\"],[0.8888888888888888,\"#fdca26\"],[1.0,\"#f0f921\"]]}],\"contourcarpet\":[{\"type\":\"contourcarpet\",\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}}],\"contour\":[{\"type\":\"contour\",\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"},\"colorscale\":[[0.0,\"#0d0887\"],[0.1111111111111111,\"#46039f\"],[0.2222222222222222,\"#7201a8\"],[0.3333333333333333,\"#9c179e\"],[0.4444444444444444,\"#bd3786\"],[0.5555555555555556,\"#d8576b\"],[0.6666666666666666,\"#ed7953\"],[0.7777777777777778,\"#fb9f3a\"],[0.8888888888888888,\"#fdca26\"],[1.0,\"#f0f921\"]]}],\"surface\":[{\"type\":\"surface\",\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"},\"colorscale\":[[0.0,\"#0d0887\"],[0.1111111111111111,\"#46039f\"],[0.2222222222222222,\"#7201a8\"],[0.3333333333333333,\"#9c179e\"],[0.4444444444444444,\"#bd3786\"],[0.5555555555555556,\"#d8576b\"],[0.6666666666666666,\"#ed7953\"],[0.7777777777777778,\"#fb9f3a\"],[0.8888888888888888,\"#fdca26\"],[1.0,\"#f0f921\"]]}],\"mesh3d\":[{\"type\":\"mesh3d\",\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}}],\"scatter\":[{\"fillpattern\":{\"fillmode\":\"overlay\",\"size\":10,\"solidity\":0.2},\"type\":\"scatter\"}],\"parcoords\":[{\"type\":\"parcoords\",\"line\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}}}],\"scatterpolargl\":[{\"type\":\"scatterpolargl\",\"marker\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}}}],\"bar\":[{\"error_x\":{\"color\":\"#2a3f5f\"},\"error_y\":{\"color\":\"#2a3f5f\"},\"marker\":{\"line\":{\"color\":\"#E5ECF6\",\"width\":0.5},\"pattern\":{\"fillmode\":\"overlay\",\"size\":10,\"solidity\":0.2}},\"type\":\"bar\"}],\"scattergeo\":[{\"type\":\"scattergeo\",\"marker\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}}}],\"scatterpolar\":[{\"type\":\"scatterpolar\",\"marker\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}}}],\"histogram\":[{\"marker\":{\"pattern\":{\"fillmode\":\"overlay\",\"size\":10,\"solidity\":0.2}},\"type\":\"histogram\"}],\"scattergl\":[{\"type\":\"scattergl\",\"marker\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}}}],\"scatter3d\":[{\"type\":\"scatter3d\",\"line\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}},\"marker\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}}}],\"scattermap\":[{\"type\":\"scattermap\",\"marker\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}}}],\"scattermapbox\":[{\"type\":\"scattermapbox\",\"marker\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}}}],\"scatterternary\":[{\"type\":\"scatterternary\",\"marker\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}}}],\"scattercarpet\":[{\"type\":\"scattercarpet\",\"marker\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}}}],\"carpet\":[{\"aaxis\":{\"endlinecolor\":\"#2a3f5f\",\"gridcolor\":\"white\",\"linecolor\":\"white\",\"minorgridcolor\":\"white\",\"startlinecolor\":\"#2a3f5f\"},\"baxis\":{\"endlinecolor\":\"#2a3f5f\",\"gridcolor\":\"white\",\"linecolor\":\"white\",\"minorgridcolor\":\"white\",\"startlinecolor\":\"#2a3f5f\"},\"type\":\"carpet\"}],\"table\":[{\"cells\":{\"fill\":{\"color\":\"#EBF0F8\"},\"line\":{\"color\":\"white\"}},\"header\":{\"fill\":{\"color\":\"#C8D4E3\"},\"line\":{\"color\":\"white\"}},\"type\":\"table\"}],\"barpolar\":[{\"marker\":{\"line\":{\"color\":\"#E5ECF6\",\"width\":0.5},\"pattern\":{\"fillmode\":\"overlay\",\"size\":10,\"solidity\":0.2}},\"type\":\"barpolar\"}],\"pie\":[{\"automargin\":true,\"type\":\"pie\"}]},\"layout\":{\"autotypenumbers\":\"strict\",\"colorway\":[\"#636efa\",\"#EF553B\",\"#00cc96\",\"#ab63fa\",\"#FFA15A\",\"#19d3f3\",\"#FF6692\",\"#B6E880\",\"#FF97FF\",\"#FECB52\"],\"font\":{\"color\":\"#2a3f5f\"},\"hovermode\":\"closest\",\"hoverlabel\":{\"align\":\"left\"},\"paper_bgcolor\":\"white\",\"plot_bgcolor\":\"#E5ECF6\",\"polar\":{\"bgcolor\":\"#E5ECF6\",\"angularaxis\":{\"gridcolor\":\"white\",\"linecolor\":\"white\",\"ticks\":\"\"},\"radialaxis\":{\"gridcolor\":\"white\",\"linecolor\":\"white\",\"ticks\":\"\"}},\"ternary\":{\"bgcolor\":\"#E5ECF6\",\"aaxis\":{\"gridcolor\":\"white\",\"linecolor\":\"white\",\"ticks\":\"\"},\"baxis\":{\"gridcolor\":\"white\",\"linecolor\":\"white\",\"ticks\":\"\"},\"caxis\":{\"gridcolor\":\"white\",\"linecolor\":\"white\",\"ticks\":\"\"}},\"coloraxis\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}},\"colorscale\":{\"sequential\":[[0.0,\"#0d0887\"],[0.1111111111111111,\"#46039f\"],[0.2222222222222222,\"#7201a8\"],[0.3333333333333333,\"#9c179e\"],[0.4444444444444444,\"#bd3786\"],[0.5555555555555556,\"#d8576b\"],[0.6666666666666666,\"#ed7953\"],[0.7777777777777778,\"#fb9f3a\"],[0.8888888888888888,\"#fdca26\"],[1.0,\"#f0f921\"]],\"sequentialminus\":[[0.0,\"#0d0887\"],[0.1111111111111111,\"#46039f\"],[0.2222222222222222,\"#7201a8\"],[0.3333333333333333,\"#9c179e\"],[0.4444444444444444,\"#bd3786\"],[0.5555555555555556,\"#d8576b\"],[0.6666666666666666,\"#ed7953\"],[0.7777777777777778,\"#fb9f3a\"],[0.8888888888888888,\"#fdca26\"],[1.0,\"#f0f921\"]],\"diverging\":[[0,\"#8e0152\"],[0.1,\"#c51b7d\"],[0.2,\"#de77ae\"],[0.3,\"#f1b6da\"],[0.4,\"#fde0ef\"],[0.5,\"#f7f7f7\"],[0.6,\"#e6f5d0\"],[0.7,\"#b8e186\"],[0.8,\"#7fbc41\"],[0.9,\"#4d9221\"],[1,\"#276419\"]]},\"xaxis\":{\"gridcolor\":\"white\",\"linecolor\":\"white\",\"ticks\":\"\",\"title\":{\"standoff\":15},\"zerolinecolor\":\"white\",\"automargin\":true,\"zerolinewidth\":2},\"yaxis\":{\"gridcolor\":\"white\",\"linecolor\":\"white\",\"ticks\":\"\",\"title\":{\"standoff\":15},\"zerolinecolor\":\"white\",\"automargin\":true,\"zerolinewidth\":2},\"scene\":{\"xaxis\":{\"backgroundcolor\":\"#E5ECF6\",\"gridcolor\":\"white\",\"linecolor\":\"white\",\"showbackground\":true,\"ticks\":\"\",\"zerolinecolor\":\"white\",\"gridwidth\":2},\"yaxis\":{\"backgroundcolor\":\"#E5ECF6\",\"gridcolor\":\"white\",\"linecolor\":\"white\",\"showbackground\":true,\"ticks\":\"\",\"zerolinecolor\":\"white\",\"gridwidth\":2},\"zaxis\":{\"backgroundcolor\":\"#E5ECF6\",\"gridcolor\":\"white\",\"linecolor\":\"white\",\"showbackground\":true,\"ticks\":\"\",\"zerolinecolor\":\"white\",\"gridwidth\":2}},\"shapedefaults\":{\"line\":{\"color\":\"#2a3f5f\"}},\"annotationdefaults\":{\"arrowcolor\":\"#2a3f5f\",\"arrowhead\":0,\"arrowwidth\":1},\"geo\":{\"bgcolor\":\"white\",\"landcolor\":\"#E5ECF6\",\"subunitcolor\":\"white\",\"showland\":true,\"showlakes\":true,\"lakecolor\":\"white\"},\"title\":{\"x\":0.05},\"mapbox\":{\"style\":\"light\"},\"margin\":{\"b\":0,\"l\":0,\"r\":0,\"t\":30}}},\"xaxis\":{\"anchor\":\"y\",\"domain\":[0.0,1.0],\"title\":{\"text\":\"Date\"}},\"yaxis\":{\"anchor\":\"x\",\"domain\":[0.0,1.0],\"title\":{\"text\":\"First Serve %\"}},\"legend\":{\"title\":{\"text\":\"Player\"},\"tracegroupgap\":0,\"orientation\":\"h\",\"yanchor\":\"bottom\",\"y\":1.02,\"xanchor\":\"center\",\"x\":0.5},\"title\":{\"text\":\"First Serve % Over Time: Sinner vs Alcaraz\"},\"height\":500,\"hovermode\":\"closest\"},                        {\"responsive\": true}                    ).then(function(){\n                            \nvar gd = document.getElementById('4d496102-1f90-43e7-a1cd-4ea8672648c9');\nvar x = new MutationObserver(function (mutations, observer) {{\n        var display = window.getComputedStyle(gd).display;\n        if (!display || display === 'none') {{\n            console.log([gd, 'removed!']);\n            Plotly.purge(gd);\n            observer.disconnect();\n        }}\n}});\n\n// Listen for the removal of the full notebook cells\nvar notebookContainer = gd.closest('#notebook-container');\nif (notebookContainer) {{\n    x.observe(notebookContainer, {childList: true});\n}}\n\n// Listen for the clearing of the current output cell\nvar outputEl = gd.closest('.output');\nif (outputEl) {{\n    x.observe(outputEl, {childList: true});\n}}\n\n                        })                };            </script>        </div>\n```\n:::\n:::\n\n\n# Summary Statistics\n\nLet's compare their average serve statistics:\n\n::: {#summary-stats .cell execution_count=6}\n``` {.python .cell-code}\n# Calculate summary statistics\nsummary = all_matches.groupby(\"player\").agg({\n    \"first_serve_pct\": [\"mean\", \"std\", \"min\", \"max\"],\n    \"ace_pct\": \"mean\",\n    \"df_pct\": \"mean\",\n    \"won\": \"mean\"\n}).round(1)\n\nsummary.columns = [\"1st Serve % (avg)\", \"1st Serve % (std)\", \"1st Serve % (min)\", \"1st Serve % (max)\",\n                   \"Ace % (avg)\", \"DF % (avg)\", \"Win Rate\"]\nsummary[\"Win Rate\"] = (summary[\"Win Rate\"] * 100).round(1)\n\nprint(\"Serve Statistics Comparison\")\nprint(\"=\" * 50)\nsummary\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nServe Statistics Comparison\n==================================================\n```\n:::\n\n::: {.cell-output .cell-output-display execution_count=6}\n```{=html}\n<div>\n<style scoped>\n    .dataframe tbody tr th:only-of-type {\n        vertical-align: middle;\n    }\n\n    .dataframe tbody tr th {\n        vertical-align: top;\n    }\n\n    .dataframe thead th {\n        text-align: right;\n    }\n</style>\n<table border=\"1\" class=\"dataframe\">\n  <thead>\n    <tr style=\"text-align: right;\">\n      <th></th>\n      <th>1st Serve % (avg)</th>\n      <th>1st Serve % (std)</th>\n      <th>1st Serve % (min)</th>\n      <th>1st Serve % (max)</th>\n      <th>Ace % (avg)</th>\n      <th>DF % (avg)</th>\n      <th>Win Rate</th>\n    </tr>\n    <tr>\n      <th>player</th>\n      <th></th>\n      <th></th>\n      <th></th>\n      <th></th>\n      <th></th>\n      <th></th>\n      <th></th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <th>Alcaraz</th>\n      <td>66.4</td>\n      <td>4.6</td>\n      <td>57.8</td>\n      <td>76.8</td>\n      <td>6.5</td>\n      <td>2.2</td>\n      <td>80.0</td>\n    </tr>\n    <tr>\n      <th>Sinner</th>\n      <td>67.8</td>\n      <td>5.5</td>\n      <td>55.1</td>\n      <td>75.2</td>\n      <td>13.0</td>\n      <td>1.5</td>\n      <td>100.0</td>\n    </tr>\n  </tbody>\n</table>\n</div>\n```\n:::\n:::\n\n\n# First Serve % by Surface\n\nHow does their first serve vary across different surfaces?\n\n::: {#surface-plot .cell execution_count=7}\n``` {.python .cell-code}\n# Group by player and surface\nsurface_stats = all_matches.groupby([\"player\", \"surface\"]).agg({\n    \"first_serve_pct\": \"mean\",\n    \"date\": \"count\"\n}).reset_index()\nsurface_stats.columns = [\"player\", \"surface\", \"first_serve_pct\", \"matches\"]\n\n# Only show surfaces with enough matches\nsurface_stats = surface_stats[surface_stats[\"matches\"] >= 3]\n\nfig = px.bar(\n    surface_stats,\n    x=\"surface\",\n    y=\"first_serve_pct\",\n    color=\"player\",\n    barmode=\"group\",\n    title=\"Average First Serve % by Surface\",\n    labels={\"first_serve_pct\": \"First Serve %\", \"surface\": \"Surface\"},\n    color_discrete_map={\"Sinner\": \"#e94560\", \"Alcaraz\": \"#4facfe\"},\n    text=\"first_serve_pct\"\n)\n\nfig.update_traces(texttemplate=\"%{text:.1f}%\", textposition=\"outside\")\nfig.update_layout(height=400, yaxis_range=[50, 75])\nfig.show()\n```\n\n::: {.cell-output .cell-output-display}\n```{=html}\n<div>            <script src=\"https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-AMS-MML_SVG\"></script><script type=\"text/javascript\">if (window.MathJax && window.MathJax.Hub && window.MathJax.Hub.Config) {window.MathJax.Hub.Config({SVG: {font: \"STIX-Web\"}});}</script>                <script type=\"text/javascript\">window.PlotlyConfig = {MathJaxConfig: 'local'};</script>\n        <script charset=\"utf-8\" src=\"https://cdn.plot.ly/plotly-3.1.1.min.js\" integrity=\"sha256-HUEFyfiTnZJxCxur99FjbKYTvKSzwDaD3/x5TqHpFu4=\" crossorigin=\"anonymous\"></script>                <div id=\"255cf365-a968-4f8f-8848-944e5958419a\" class=\"plotly-graph-div\" style=\"height:400px; width:100%;\"></div>            <script type=\"text/javascript\">                window.PLOTLYENV=window.PLOTLYENV || {};                                if (document.getElementById(\"255cf365-a968-4f8f-8848-944e5958419a\")) {                    Plotly.newPlot(                        \"255cf365-a968-4f8f-8848-944e5958419a\",                        [{\"alignmentgroup\":\"True\",\"hovertemplate\":\"player=Alcaraz\\u003cbr\\u003eSurface=%{x}\\u003cbr\\u003eFirst Serve %=%{text}\\u003cextra\\u003e\\u003c\\u002fextra\\u003e\",\"legendgroup\":\"Alcaraz\",\"marker\":{\"color\":\"#4facfe\",\"pattern\":{\"shape\":\"\"}},\"name\":\"Alcaraz\",\"offsetgroup\":\"Alcaraz\",\"orientation\":\"v\",\"showlegend\":true,\"text\":{\"dtype\":\"f8\",\"bdata\":\"MzMzMzObUEA=\"},\"textposition\":\"outside\",\"x\":[\"Hard\"],\"xaxis\":\"x\",\"y\":{\"dtype\":\"f8\",\"bdata\":\"MzMzMzObUEA=\"},\"yaxis\":\"y\",\"type\":\"bar\",\"texttemplate\":\"%{text:.1f}%\"},{\"alignmentgroup\":\"True\",\"hovertemplate\":\"player=Sinner\\u003cbr\\u003eSurface=%{x}\\u003cbr\\u003eFirst Serve %=%{text}\\u003cextra\\u003e\\u003c\\u002fextra\\u003e\",\"legendgroup\":\"Sinner\",\"marker\":{\"color\":\"#e94560\",\"pattern\":{\"shape\":\"\"}},\"name\":\"Sinner\",\"offsetgroup\":\"Sinner\",\"orientation\":\"v\",\"showlegend\":true,\"text\":{\"dtype\":\"f8\",\"bdata\":\"R2u0Rmv0UEA=\"},\"textposition\":\"outside\",\"x\":[\"Hard\"],\"xaxis\":\"x\",\"y\":{\"dtype\":\"f8\",\"bdata\":\"R2u0Rmv0UEA=\"},\"yaxis\":\"y\",\"type\":\"bar\",\"texttemplate\":\"%{text:.1f}%\"}],                        {\"template\":{\"data\":{\"histogram2dcontour\":[{\"type\":\"histogram2dcontour\",\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"},\"colorscale\":[[0.0,\"#0d0887\"],[0.1111111111111111,\"#46039f\"],[0.2222222222222222,\"#7201a8\"],[0.3333333333333333,\"#9c179e\"],[0.4444444444444444,\"#bd3786\"],[0.5555555555555556,\"#d8576b\"],[0.6666666666666666,\"#ed7953\"],[0.7777777777777778,\"#fb9f3a\"],[0.8888888888888888,\"#fdca26\"],[1.0,\"#f0f921\"]]}],\"choropleth\":[{\"type\":\"choropleth\",\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}}],\"histogram2d\":[{\"type\":\"histogram2d\",\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"},\"colorscale\":[[0.0,\"#0d0887\"],[0.1111111111111111,\"#46039f\"],[0.2222222222222222,\"#7201a8\"],[0.3333333333333333,\"#9c179e\"],[0.4444444444444444,\"#bd3786\"],[0.5555555555555556,\"#d8576b\"],[0.6666666666666666,\"#ed7953\"],[0.7777777777777778,\"#fb9f3a\"],[0.8888888888888888,\"#fdca26\"],[1.0,\"#f0f921\"]]}],\"heatmap\":[{\"type\":\"heatmap\",\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"},\"colorscale\":[[0.0,\"#0d0887\"],[0.1111111111111111,\"#46039f\"],[0.2222222222222222,\"#7201a8\"],[0.3333333333333333,\"#9c179e\"],[0.4444444444444444,\"#bd3786\"],[0.5555555555555556,\"#d8576b\"],[0.6666666666666666,\"#ed7953\"],[0.7777777777777778,\"#fb9f3a\"],[0.8888888888888888,\"#fdca26\"],[1.0,\"#f0f921\"]]}],\"contourcarpet\":[{\"type\":\"contourcarpet\",\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}}],\"contour\":[{\"type\":\"contour\",\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"},\"colorscale\":[[0.0,\"#0d0887\"],[0.1111111111111111,\"#46039f\"],[0.2222222222222222,\"#7201a8\"],[0.3333333333333333,\"#9c179e\"],[0.4444444444444444,\"#bd3786\"],[0.5555555555555556,\"#d8576b\"],[0.6666666666666666,\"#ed7953\"],[0.7777777777777778,\"#fb9f3a\"],[0.8888888888888888,\"#fdca26\"],[1.0,\"#f0f921\"]]}],\"surface\":[{\"type\":\"surface\",\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"},\"colorscale\":[[0.0,\"#0d0887\"],[0.1111111111111111,\"#46039f\"],[0.2222222222222222,\"#7201a8\"],[0.3333333333333333,\"#9c179e\"],[0.4444444444444444,\"#bd3786\"],[0.5555555555555556,\"#d8576b\"],[0.6666666666666666,\"#ed7953\"],[0.7777777777777778,\"#fb9f3a\"],[0.8888888888888888,\"#fdca26\"],[1.0,\"#f0f921\"]]}],\"mesh3d\":[{\"type\":\"mesh3d\",\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}}],\"scatter\":[{\"fillpattern\":{\"fillmode\":\"overlay\",\"size\":10,\"solidity\":0.2},\"type\":\"scatter\"}],\"parcoords\":[{\"type\":\"parcoords\",\"line\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}}}],\"scatterpolargl\":[{\"type\":\"scatterpolargl\",\"marker\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}}}],\"bar\":[{\"error_x\":{\"color\":\"#2a3f5f\"},\"error_y\":{\"color\":\"#2a3f5f\"},\"marker\":{\"line\":{\"color\":\"#E5ECF6\",\"width\":0.5},\"pattern\":{\"fillmode\":\"overlay\",\"size\":10,\"solidity\":0.2}},\"type\":\"bar\"}],\"scattergeo\":[{\"type\":\"scattergeo\",\"marker\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}}}],\"scatterpolar\":[{\"type\":\"scatterpolar\",\"marker\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}}}],\"histogram\":[{\"marker\":{\"pattern\":{\"fillmode\":\"overlay\",\"size\":10,\"solidity\":0.2}},\"type\":\"histogram\"}],\"scattergl\":[{\"type\":\"scattergl\",\"marker\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}}}],\"scatter3d\":[{\"type\":\"scatter3d\",\"line\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}},\"marker\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}}}],\"scattermap\":[{\"type\":\"scattermap\",\"marker\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}}}],\"scattermapbox\":[{\"type\":\"scattermapbox\",\"marker\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}}}],\"scatterternary\":[{\"type\":\"scatterternary\",\"marker\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}}}],\"scattercarpet\":[{\"type\":\"scattercarpet\",\"marker\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}}}],\"carpet\":[{\"aaxis\":{\"endlinecolor\":\"#2a3f5f\",\"gridcolor\":\"white\",\"linecolor\":\"white\",\"minorgridcolor\":\"white\",\"startlinecolor\":\"#2a3f5f\"},\"baxis\":{\"endlinecolor\":\"#2a3f5f\",\"gridcolor\":\"white\",\"linecolor\":\"white\",\"minorgridcolor\":\"white\",\"startlinecolor\":\"#2a3f5f\"},\"type\":\"carpet\"}],\"table\":[{\"cells\":{\"fill\":{\"color\":\"#EBF0F8\"},\"line\":{\"color\":\"white\"}},\"header\":{\"fill\":{\"color\":\"#C8D4E3\"},\"line\":{\"color\":\"white\"}},\"type\":\"table\"}],\"barpolar\":[{\"marker\":{\"line\":{\"color\":\"#E5ECF6\",\"width\":0.5},\"pattern\":{\"fillmode\":\"overlay\",\"size\":10,\"solidity\":0.2}},\"type\":\"barpolar\"}],\"pie\":[{\"automargin\":true,\"type\":\"pie\"}]},\"layout\":{\"autotypenumbers\":\"strict\",\"colorway\":[\"#636efa\",\"#EF553B\",\"#00cc96\",\"#ab63fa\",\"#FFA15A\",\"#19d3f3\",\"#FF6692\",\"#B6E880\",\"#FF97FF\",\"#FECB52\"],\"font\":{\"color\":\"#2a3f5f\"},\"hovermode\":\"closest\",\"hoverlabel\":{\"align\":\"left\"},\"paper_bgcolor\":\"white\",\"plot_bgcolor\":\"#E5ECF6\",\"polar\":{\"bgcolor\":\"#E5ECF6\",\"angularaxis\":{\"gridcolor\":\"white\",\"linecolor\":\"white\",\"ticks\":\"\"},\"radialaxis\":{\"gridcolor\":\"white\",\"linecolor\":\"white\",\"ticks\":\"\"}},\"ternary\":{\"bgcolor\":\"#E5ECF6\",\"aaxis\":{\"gridcolor\":\"white\",\"linecolor\":\"white\",\"ticks\":\"\"},\"baxis\":{\"gridcolor\":\"white\",\"linecolor\":\"white\",\"ticks\":\"\"},\"caxis\":{\"gridcolor\":\"white\",\"linecolor\":\"white\",\"ticks\":\"\"}},\"coloraxis\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}},\"colorscale\":{\"sequential\":[[0.0,\"#0d0887\"],[0.1111111111111111,\"#46039f\"],[0.2222222222222222,\"#7201a8\"],[0.3333333333333333,\"#9c179e\"],[0.4444444444444444,\"#bd3786\"],[0.5555555555555556,\"#d8576b\"],[0.6666666666666666,\"#ed7953\"],[0.7777777777777778,\"#fb9f3a\"],[0.8888888888888888,\"#fdca26\"],[1.0,\"#f0f921\"]],\"sequentialminus\":[[0.0,\"#0d0887\"],[0.1111111111111111,\"#46039f\"],[0.2222222222222222,\"#7201a8\"],[0.3333333333333333,\"#9c179e\"],[0.4444444444444444,\"#bd3786\"],[0.5555555555555556,\"#d8576b\"],[0.6666666666666666,\"#ed7953\"],[0.7777777777777778,\"#fb9f3a\"],[0.8888888888888888,\"#fdca26\"],[1.0,\"#f0f921\"]],\"diverging\":[[0,\"#8e0152\"],[0.1,\"#c51b7d\"],[0.2,\"#de77ae\"],[0.3,\"#f1b6da\"],[0.4,\"#fde0ef\"],[0.5,\"#f7f7f7\"],[0.6,\"#e6f5d0\"],[0.7,\"#b8e186\"],[0.8,\"#7fbc41\"],[0.9,\"#4d9221\"],[1,\"#276419\"]]},\"xaxis\":{\"gridcolor\":\"white\",\"linecolor\":\"white\",\"ticks\":\"\",\"title\":{\"standoff\":15},\"zerolinecolor\":\"white\",\"automargin\":true,\"zerolinewidth\":2},\"yaxis\":{\"gridcolor\":\"white\",\"linecolor\":\"white\",\"ticks\":\"\",\"title\":{\"standoff\":15},\"zerolinecolor\":\"white\",\"automargin\":true,\"zerolinewidth\":2},\"scene\":{\"xaxis\":{\"backgroundcolor\":\"#E5ECF6\",\"gridcolor\":\"white\",\"linecolor\":\"white\",\"showbackground\":true,\"ticks\":\"\",\"zerolinecolor\":\"white\",\"gridwidth\":2},\"yaxis\":{\"backgroundcolor\":\"#E5ECF6\",\"gridcolor\":\"white\",\"linecolor\":\"white\",\"showbackground\":true,\"ticks\":\"\",\"zerolinecolor\":\"white\",\"gridwidth\":2},\"zaxis\":{\"backgroundcolor\":\"#E5ECF6\",\"gridcolor\":\"white\",\"linecolor\":\"white\",\"showbackground\":true,\"ticks\":\"\",\"zerolinecolor\":\"white\",\"gridwidth\":2}},\"shapedefaults\":{\"line\":{\"color\":\"#2a3f5f\"}},\"annotationdefaults\":{\"arrowcolor\":\"#2a3f5f\",\"arrowhead\":0,\"arrowwidth\":1},\"geo\":{\"bgcolor\":\"white\",\"landcolor\":\"#E5ECF6\",\"subunitcolor\":\"white\",\"showland\":true,\"showlakes\":true,\"lakecolor\":\"white\"},\"title\":{\"x\":0.05},\"mapbox\":{\"style\":\"light\"},\"margin\":{\"b\":0,\"l\":0,\"r\":0,\"t\":30}}},\"xaxis\":{\"anchor\":\"y\",\"domain\":[0.0,1.0],\"title\":{\"text\":\"Surface\"}},\"yaxis\":{\"anchor\":\"x\",\"domain\":[0.0,1.0],\"title\":{\"text\":\"First Serve %\"},\"range\":[50,75]},\"legend\":{\"title\":{\"text\":\"player\"},\"tracegroupgap\":0},\"title\":{\"text\":\"Average First Serve % by Surface\"},\"barmode\":\"group\",\"height\":400},                        {\"responsive\": true}                    ).then(function(){\n                            \nvar gd = document.getElementById('255cf365-a968-4f8f-8848-944e5958419a');\nvar x = new MutationObserver(function (mutations, observer) {{\n        var display = window.getComputedStyle(gd).display;\n        if (!display || display === 'none') {{\n            console.log([gd, 'removed!']);\n            Plotly.purge(gd);\n            observer.disconnect();\n        }}\n}});\n\n// Listen for the removal of the full notebook cells\nvar notebookContainer = gd.closest('#notebook-container');\nif (notebookContainer) {{\n    x.observe(notebookContainer, {childList: true});\n}}\n\n// Listen for the clearing of the current output cell\nvar outputEl = gd.closest('.output');\nif (outputEl) {{\n    x.observe(outputEl, {childList: true});\n}}\n\n                        })                };            </script>        </div>\n```\n:::\n:::\n\n\n# Rate Limiting & Ethics\n\nWhen scraping any website, be a good citizen:\n\n1. **Rate limit your requests** - Add delays between page loads (e.g., 2 seconds)\n2. **Respect robots.txt** - Check if scraping is allowed\n3. **Don't overload servers** - Scrape during off-peak hours for large jobs\n4. **Credit the source** - Tennis Abstract data is maintained by Jeff Sackmann\n\n```python\nimport asyncio\n\nplayers = [\"JannikSinner\", \"CarlosAlcaraz\", \"NovakDjokovic\"]\nfor player in players:\n    data = await scrape_player_with_stats(player, player.split()[-1])\n    await asyncio.sleep(2)  # Wait 2 seconds between requests\n```\n\n# Using the Sync API (for Scripts)\n\nIf you're writing a standalone Python script (not a notebook), you can use the simpler synchronous API:\n\n```python\nfrom playwright.sync_api import sync_playwright\n\ndef scrape_player_with_stats(player_url_name: str, player_last_name: str, tour: str = \"atp\"):\n    prefix = \"w\" if tour == \"wta\" else \"\"\n    url = f\"https://www.tennisabstract.com/cgi-bin/{prefix}player.cgi?p={player_url_name}\"\n    \n    with sync_playwright() as p:\n        browser = p.chromium.launch(headless=True)\n        page = browser.new_page()\n        page.goto(url, wait_until=\"domcontentloaded\")\n        page.wait_for_timeout(3000)\n        \n        # ... rest of scraping logic (without await)\n        \n        browser.close()\n```\n\nThe sync API is cleaner for scripts, but won't work inside Jupyter notebooks or other async contexts.\n\n# Conclusion\n\nIn this tutorial, we built a web scraper for Tennis Abstract using Playwright and used it to compare serve statistics between Jannik Sinner and Carlos Alcaraz. Key takeaways:\n\n- **Playwright** handles JavaScript-rendered content that traditional scraping tools can't\n- Use the **async API** in notebooks, **sync API** in scripts\n- **Wait for content** to load before extracting data\n- **Parse serve statistics** for deeper analysis beyond win/loss records\n- **Visualize trends** with interactive Plotly charts\n- **Be respectful** - rate limit and credit your sources\n\nFor a more comprehensive scraper that handles multiple players and outputs CSV compatible with Jeff Sackmann's data format, check out the full implementation at `data/scrape_tennisabstract.py` in this repository.\n\n---\n\n*Data source: [Tennis Abstract](https://www.tennisabstract.com/) by Jeff Sackmann. Match data is made available under the [CC BY-NC-SA 4.0](https://creativecommons.org/licenses/by-nc-sa/4.0/) license.*\n\n",
    "supporting": [
      "scraping-tutorial_files/figure-html"
    ],
    "filters": [],
    "includes": {
      "include-in-header": [
        "<script src=\"https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js\" integrity=\"sha512-c3Nl8+7g4LMSTdrm621y7kf9v3SDPnhxLNhcjFJbKECVnmZHTdo+IRO05sNLTH/D3vA6u1X32ehoLC7WFVdheg==\" crossorigin=\"anonymous\"></script>\n<script src=\"https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js\" integrity=\"sha512-bLT0Qm9VnAYZDflyKcBaQ2gg0hSYNQrJ8RilYldYQ1FxQYoCLtUjuuRuZo+fjqhx/qtq/1itJ0C2ejDxltZVFg==\" crossorigin=\"anonymous\" data-relocate-top=\"true\"></script>\n<script type=\"application/javascript\">define('jquery', [],function() {return window.jQuery;})</script>\n"
      ]
    }
  }
}